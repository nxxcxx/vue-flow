{
  "nodes": [
    {
      "name": "Geometry",
      "uuid": "51c574c7-f47f-43cf-aa27-94871e871560",
      "position": {
        "x": 50,
        "y": 152
      },
      "_fnstr": "this.init = input => {\n  this.geometry = new THREE.IcosahedronGeometry(\n    600,\n    2\n  )\n}\n\nthis.process = input => {\n  return {\n    Geometry: this.geometry\n  }\n}\n\nthis.flush = () => {\n  if ( this.geometry )\n    this.geometry.dispose()\n  delete this.geometry\n}\n",
      "input": [],
      "output": [
        {
          "name": "Geometry",
          "uuid": "6d69b216-e2ea-4a7d-8cb5-3d62bdbaf241"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "Material",
      "uuid": "36a91bc9-d44a-4c1a-a880-f714d12ce8aa",
      "position": {
        "x": 50,
        "y": 203
      },
      "_fnstr": "this.init = input => {\n  this.material = new THREE.MeshBasicMaterial( { \n    \tcolor: 0xffffff, \n    \twireframe: true,\n      wireframeLinewidth: 2\n  \t}\n  )\n}\n\nthis.process = input => {\n  return {\n    Material: this.material\n  }\n}\n\nthis.flush = () => {\n  if ( this.material )\n    this.material.dispose()\n  delete this.material\n}\n",
      "input": [],
      "output": [
        {
          "name": "Material",
          "uuid": "9b739b19-babb-4f57-8648-21e45a938f1b"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "Mesh",
      "uuid": "4d9dc0b4-44ba-4626-9087-b42b3be2d5a1",
      "position": {
        "x": 165,
        "y": 171
      },
      "_fnstr": "this.init = input => {\n  this.mesh = new THREE.Mesh(\n    input.Geometry,\n    input.Material\n  )\n}\n\nthis.process = input => {\n  return {\n    Mesh: this.mesh\n  }\n}\n\nthis.flush = () => {\n  if ( !this.mesh ) return\n    this.mesh.geometry.dispose()\n    this.mesh.material.dispose()\n  delete this.mesh\n}\n",
      "input": [
        {
          "name": "Geometry",
          "uuid": "53fdc96c-5491-4483-8b19-7b42f2fe71c8"
        },
        {
          "name": "Material",
          "uuid": "1d14ce97-8ba8-4e0d-9a57-9c592b859331"
        }
      ],
      "output": [
        {
          "name": "Mesh",
          "uuid": "89717ab8-b273-46d2-a24b-9a8c6a63a3d8"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "Cloner",
      "uuid": "0a2752fb-5f99-4e5c-b16f-3975e01a4ebf",
      "position": {
        "x": 320,
        "y": 129
      },
      "_fnstr": "this.init = input => {\n  let c = input.Count\n  this.meshes = new THREE.Object3D()\n  Array( c ).fill( null ).map( x => {\n    let mesh = input.Mesh.clone()\n    mesh.material = mesh.material.clone()\n    return this.meshes.add( mesh )\n  } )\n}\n\nthis.process = input => {\n  return {\n    'Mesh[]': this.meshes\n  }\n}\n\nthis.flush = () => {\n  if ( !this.meshes ) return\n  this.meshes.children.forEach( m => {\n    m.geometry.dispose()\n    m.material.dispose()\n  } )\n  delete this.meshes\n}",
      "input": [
        {
          "name": "Count",
          "uuid": "b0d2d8d2-07da-40d8-b7af-700bfcfbe928"
        },
        {
          "name": "Mesh",
          "uuid": "5931e3cb-aebc-44a0-8d9e-8123cfe39f6b"
        }
      ],
      "output": [
        {
          "name": "Mesh[]",
          "uuid": "b2edd98a-99c1-44c9-8776-4a9632de398b"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "DATA",
      "uuid": "68f0eb9c-0d73-4098-8e61-37bdfbb0ad18",
      "position": {
        "x": 53,
        "y": 50
      },
      "_fnstr": "this.init = () => {\n\tthis.clock = new THREE.Clock()\n  setTimeout( () => this.z = 1.0, 1000 )\n}\n\nthis.process = () => {\n  let dt = this.clock.getDelta()\n  return {\n    X: 1.0 * dt,\n    Y: this.clock.elapsedTime,\n    Z: this.z,\n    C: 16\n  }\n}\n\nthis.flush = () => {\n\t\n}",
      "input": [],
      "output": [
        {
          "name": "Z",
          "uuid": "e5e379b8-d8c8-447c-9f14-747d35e81697"
        },
        {
          "name": "Y",
          "uuid": "b8855666-0218-47e6-be76-a022ba3bc1d2"
        },
        {
          "name": "X",
          "uuid": "dd3e35b0-337b-4218-a17b-d22d001151bc"
        },
        {
          "name": "C",
          "uuid": "409e1180-5ed1-4a20-98d7-4e2e082e6ead"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "Modifier",
      "uuid": "5a42b102-b884-4cf4-855b-383b50a724b4",
      "position": {
        "x": 478,
        "y": 50
      },
      "_fnstr": "this.init = input => {\n  \n}\n\nthis.process = input => {\n  this.meshes = input.OBJ.children\n  input.OBJ.children.forEach( ( mesh, idx ) => {\n    let si = ( idx + 1 ) / input.Count\n  \tlet sx = Math.pow( input.D3 * ( 1.0 - si ), 2.25 ) * 10.0 + si * 1.0\n    let iv = ( 1.0 - idx / input.Count ) * 0.5\n    mesh.scale.setScalar( sx * 0.5 )\n    mesh.rotation.x += input.D1 * iv\n    mesh.rotation.z += input.D1 * iv\n    mesh.rotation.y += input.D1 * iv\n    mesh.material.color.setHSL( Math.cos( ( input.D2 * 0.05) + idx * 0.01 ), 1.0, 0.5 )\n    mesh.material.transparent = true\n    mesh.material.opacity = 0.01 + ( ( 1.0 - idx / input.Count ) * input.D3 * 0.8 )\n  } )\n  return {\n    OBJ: input.OBJ\n  }\n}\n\nthis.flush = () => {\n\n}",
      "input": [
        {
          "name": "D3",
          "uuid": "61925410-6259-439c-b7cf-711302d07bb5"
        },
        {
          "name": "D2",
          "uuid": "390cb6c1-bfd9-4e24-a0ed-006eb8e91b50"
        },
        {
          "name": "D1",
          "uuid": "2291b24e-092b-4b17-a039-bafc20c35ff9"
        },
        {
          "name": "Count",
          "uuid": "f0d007d6-6c2f-4c02-beb4-da3434d83696"
        },
        {
          "name": "OBJ",
          "uuid": "a83236f8-1672-4fe2-a275-bdc20172a973"
        }
      ],
      "output": [
        {
          "name": "OBJ",
          "uuid": "7a9e0de0-9b74-42ec-9e5c-db6a411958b1"
        }
      ],
      "nodes": [],
      "connections": []
    },
    {
      "name": "XPack-5562",
      "uuid": "55620c99-6859-4f13-9417-de608cf1b895",
      "position": {
        "x": 610,
        "y": 50
      },
      "_fnstr": "",
      "input": [
        {
          "name": "OBJ0",
          "uuid": "1aba94c5-86ee-4285-91b9-30d2a896c6fd",
          "_via": "afa7f1ec-12f1-47e6-924d-42eeabff24a1"
        }
      ],
      "output": [],
      "nodes": [
        {
          "name": "VIA",
          "uuid": "c7e6e040-c943-4dfc-ac37-cb09a627afbf",
          "position": {
            "x": 434,
            "y": 57
          },
          "_fnstr": "",
          "input": [],
          "output": [],
          "nodes": [],
          "connections": []
        },
        {
          "name": "VIA",
          "uuid": "cc1af423-f89f-49b3-9f8f-cf1023cd2b7b",
          "position": {
            "x": 50,
            "y": 100
          },
          "_fnstr": "",
          "input": [],
          "output": [
            {
              "name": "OBJ0",
              "uuid": "afa7f1ec-12f1-47e6-924d-42eeabff24a1",
              "_via": "1aba94c5-86ee-4285-91b9-30d2a896c6fd"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "CAMERA",
          "uuid": "80914c3a-70c6-4d3c-880e-f1b07e664ca6",
          "position": {
            "x": 185,
            "y": 50
          },
          "_fnstr": "this.init = ( input, engine ) => {\n  this.camera = new THREE.PerspectiveCamera( 75, engine.width / engine.height, 1, 10000 )\n  this.camera.position.z = 1000\n}\n\nthis.process = ( input, engine ) => {\n  this.camera.aspect = engine.width / engine.height\n  this.camera.updateProjectionMatrix()\n  return {\n    Camera: this.camera\n  }\n}\n\nthis.flush = () => {\n  delete this.camera\n}",
          "input": [],
          "output": [
            {
              "name": "Camera",
              "uuid": "13f3fab8-2072-4de7-9e5a-5e647ea39248"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "SCENE",
          "uuid": "ff60190e-b3cf-47d0-9188-e95771ca1c9c",
          "position": {
            "x": 154,
            "y": 101
          },
          "_fnstr": "this.init = input => {\n  this.scene = new THREE.Scene()\n}\n\nthis.process = input => {\n  this.scene.children[ 0 ] = input.OBJ0\n  return {\n    Scene: this.scene\n  }\n}\n\nthis.flush = () => {\n  delete this.scene\n}",
          "input": [
            {
              "name": "OBJ0",
              "uuid": "e4c87c73-7eea-494a-b1cb-c178b48975a0"
            }
          ],
          "output": [
            {
              "name": "Scene",
              "uuid": "e8534b90-307e-46db-9a8f-5454620b961b"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "RENDERER",
          "uuid": "cab842b8-f42a-4376-9f97-96d931fa2f17",
          "position": {
            "x": 307,
            "y": 51
          },
          "_fnstr": "this.init = ( input, engine ) => {\n  let renderer = engine.renderer\n  this.renderer = renderer\n  renderer.setClearColor( 0x000000, 0 )\n  renderer.clear()\n}\n\nthis.process = ( input, engine ) => {\n  let renderer = engine.renderer\n  renderer.render( input.Scene, input.Camera )\n}\n\nthis.flush = ( engine ) => {\n  if ( this.renderer )\n    this.renderer.renderLists.dispose()\n}",
          "input": [
            {
              "name": "Camera",
              "uuid": "ab381cad-7036-4abe-bf6f-edd7b9051d49"
            },
            {
              "name": "Scene",
              "uuid": "2ee00718-03e4-43ab-abc3-3ee5510737b3"
            }
          ],
          "output": [],
          "nodes": [],
          "connections": []
        }
      ],
      "connections": [
        [
          "13f3fab8-2072-4de7-9e5a-5e647ea39248",
          "ab381cad-7036-4abe-bf6f-edd7b9051d49"
        ],
        [
          "e8534b90-307e-46db-9a8f-5454620b961b",
          "2ee00718-03e4-43ab-abc3-3ee5510737b3"
        ],
        [
          "afa7f1ec-12f1-47e6-924d-42eeabff24a1",
          "e4c87c73-7eea-494a-b1cb-c178b48975a0"
        ]
      ]
    },
    {
      "name": "XPack-3C3F",
      "uuid": "3c3f3c0e-e5c5-4f1b-9663-58ea04399af4",
      "position": {
        "x": 260,
        "y": 50
      },
      "_fnstr": "",
      "input": [
        {
          "name": "Gain",
          "uuid": "5aa1061d-bda1-478e-ad30-125242d87db9",
          "_via": "a28113da-8d39-4ffb-96a4-68190744e583"
        }
      ],
      "output": [
        {
          "name": "Freq",
          "uuid": "79fbc674-8f2b-4a98-9c96-c2434889c28c",
          "_via": "62a7731c-c05a-4fc6-8eb7-98f25246be2f"
        }
      ],
      "nodes": [
        {
          "name": "VIA",
          "uuid": "e2d78f85-6a74-4ac8-b33d-bdea6b60a45a",
          "position": {
            "x": 805,
            "y": 108
          },
          "_fnstr": "",
          "input": [
            {
              "name": "Freq",
              "uuid": "62a7731c-c05a-4fc6-8eb7-98f25246be2f",
              "_via": "79fbc674-8f2b-4a98-9c96-c2434889c28c"
            }
          ],
          "output": [],
          "nodes": [],
          "connections": []
        },
        {
          "name": "VIA",
          "uuid": "506da927-1310-4feb-a3ed-50438385cfe6",
          "position": {
            "x": 50,
            "y": 120
          },
          "_fnstr": "",
          "input": [],
          "output": [
            {
              "name": "Gain",
              "uuid": "a28113da-8d39-4ffb-96a4-68190744e583",
              "_via": "5aa1061d-bda1-478e-ad30-125242d87db9"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "SOUNDCLOUD URL",
          "uuid": "cdc1a18e-8af8-4745-8322-0d3688f2788f",
          "position": {
            "x": 110,
            "y": 50
          },
          "_fnstr": "this.init = () => {\n}\n\nthis.process = () => {\n  return {\n  \tURL: 'https://soundcloud.com/bassti_music/desiigner-panda-bassti-lofi-remix'\n  }\n}\n\nthis.flush = () => {\n}\n",
          "input": [],
          "output": [
            {
              "name": "URL",
              "uuid": "e683595d-a6ba-4e68-bd0a-9cf2a126ab8f"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "AUDIO",
          "uuid": "b83f8c23-91b3-443e-903d-2420409ae6fb",
          "position": {
            "x": 157,
            "y": 163
          },
          "_fnstr": "this.init = () => {\n  this.audioCtx = new (window.AudioContext || window.webkitAudioContext)()\n}\n\nthis.process = () => {\n  return {\n  \tContext: this.audioCtx\n  }\n}\n\nthis.flush = () => {\n}\n",
          "input": [],
          "output": [
            {
              "name": "Context",
              "uuid": "3f4032ff-a0cf-4cc5-9134-769eb94ce169"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "INP STREAM SRC",
          "uuid": "300a7782-413e-40c3-92e3-d6813d0f6a93",
          "position": {
            "x": 317,
            "y": 51
          },
          "_fnstr": "this.init = ( input ) => {\n\tlet self = this\n\tthis.audio = document.createElement( 'audio' )\n\tthis.audio.crossOrigin = 'anonymous'\n\tthis.audio.play()\n  this.audio.volume = 0.5\n\tthis.sourceNode = input.Context.createMediaElementSource( this.audio )\n\tthis.sourceNode.connect( input.Context.destination )\n  \n\tfunction get( url, callback ) {\n\t\tvar request = new XMLHttpRequest()\n\t\trequest.onreadystatechange = () => { \n\t\t\tif ( request.readyState === 4 && request.status === 200 ) {\n\t\t\t\tcallback( request.responseText )\n\t\t\t}\n\t\t}\n\t\trequest.open( 'GET', url, true )\n\t\trequest.send( null )\n\t}\n\n\tlet clientParam = 'client_id=aae0cd3ce269784234bb78aa6d485394'\n  get( `http://api.soundcloud.com/resolve?url=${input.URL}&${clientParam}`, res => {\n    let track = JSON.parse( res )\n    self.audio.src = `${track.stream_url}?${clientParam}`\n  } )\n\t\n}\n\nthis.process = ( input ) => {\n\treturn {\n\t\tNode: this.sourceNode\n\t}\n}\n\nthis.flush = () => {\n\tif ( this.audio ) {\n\t\tthis.audio.pause()\n\t\tthis.audio.currentTime = 0\n    this.audio.src = ''\n\t}\n}",
          "input": [
            {
              "name": "URL",
              "uuid": "f7a3090c-0766-4a9c-87de-364c38cea91c"
            },
            {
              "name": "Context",
              "uuid": "67db3c5c-2de2-40bb-8ec7-49eef639dc8e"
            }
          ],
          "output": [
            {
              "name": "Node",
              "uuid": "bfdbb4b9-f795-4d7f-b00a-b8d9ee291bf0"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "GAIN",
          "uuid": "0b5e0509-9ddc-4915-b37f-80507e4aad01",
          "position": {
            "x": 483,
            "y": 104
          },
          "_fnstr": "this.init = ( input ) => {\n  this.gainNode = input.Context.createGain()\n}\n\nthis.process = ( input ) => {\n  input.Node && input.Node.connect( this.gainNode )\n  this.gainNode.gain.value = input.Gain || 1.0\n  return {\n  \tNode: this.gainNode\n  }\n}\n\nthis.flush = () => {\n}\n",
          "input": [
            {
              "name": "Node",
              "uuid": "96f7984f-4f16-400c-8346-a6fd60d82ca0"
            },
            {
              "name": "Gain",
              "uuid": "450bc860-5435-47a5-9e9f-a14c267f87cb"
            },
            {
              "name": "Context",
              "uuid": "3db90ff7-ca85-41b8-801b-d47464e4d776"
            }
          ],
          "output": [
            {
              "name": "Node",
              "uuid": "54c2bb9f-ba71-4495-b81e-856b9b345ae5"
            }
          ],
          "nodes": [],
          "connections": []
        },
        {
          "name": "ANALYZER",
          "uuid": "c9f116bf-c887-45d6-b605-c81c0a417676",
          "position": {
            "x": 634,
            "y": 149
          },
          "_fnstr": "this.init = ( input ) => {\n  this.analyzer = input.Context.createAnalyser()\n  this.analyzer.fftSize = 2048\n\tthis.freqArray = new Uint8Array( this.analyzer.frequencyBinCount )\n  // console.log( 'freqBin', this.analyzer.frequencyBinCount )\n}\n\nthis.process = ( input ) => {\n  input.Node && input.Node.connect( this.analyzer )\n  this.analyzer.getByteFrequencyData( this.freqArray )\n  let thres = computeAverage( this.freqArray, 0, 1024 ) / 256\n\treturn {\n\t\tFreq: thres\n\t}\n}\n\nthis.flush = () => {\n}\n\nfunction computeAverage( freqArray, start, end ) {\n\treturn freqArray.slice( start, end ).reduce( ( a, b ) => a + b ) / ( end - start )\n}",
          "input": [
            {
              "name": "Node",
              "uuid": "b85a93b3-8704-4374-b641-48853a268e3e"
            },
            {
              "name": "Context",
              "uuid": "338a8a39-b118-4d37-817e-7e6b9233560d"
            }
          ],
          "output": [
            {
              "name": "Freq",
              "uuid": "b8ebc478-00fa-4ee4-a3d9-bdae27e838b4"
            }
          ],
          "nodes": [],
          "connections": []
        }
      ],
      "connections": [
        [
          "a28113da-8d39-4ffb-96a4-68190744e583",
          "450bc860-5435-47a5-9e9f-a14c267f87cb"
        ],
        [
          "b8ebc478-00fa-4ee4-a3d9-bdae27e838b4",
          "62a7731c-c05a-4fc6-8eb7-98f25246be2f"
        ],
        [
          "3f4032ff-a0cf-4cc5-9134-769eb94ce169",
          "67db3c5c-2de2-40bb-8ec7-49eef639dc8e"
        ],
        [
          "3f4032ff-a0cf-4cc5-9134-769eb94ce169",
          "3db90ff7-ca85-41b8-801b-d47464e4d776"
        ],
        [
          "bfdbb4b9-f795-4d7f-b00a-b8d9ee291bf0",
          "96f7984f-4f16-400c-8346-a6fd60d82ca0"
        ],
        [
          "54c2bb9f-ba71-4495-b81e-856b9b345ae5",
          "b85a93b3-8704-4374-b641-48853a268e3e"
        ],
        [
          "3f4032ff-a0cf-4cc5-9134-769eb94ce169",
          "338a8a39-b118-4d37-817e-7e6b9233560d"
        ],
        [
          "e683595d-a6ba-4e68-bd0a-9cf2a126ab8f",
          "f7a3090c-0766-4a9c-87de-364c38cea91c"
        ]
      ]
    }
  ],
  "connections": [
    [
      "6d69b216-e2ea-4a7d-8cb5-3d62bdbaf241",
      "53fdc96c-5491-4483-8b19-7b42f2fe71c8"
    ],
    [
      "9b739b19-babb-4f57-8648-21e45a938f1b",
      "1d14ce97-8ba8-4e0d-9a57-9c592b859331"
    ],
    [
      "89717ab8-b273-46d2-a24b-9a8c6a63a3d8",
      "5931e3cb-aebc-44a0-8d9e-8123cfe39f6b"
    ],
    [
      "b2edd98a-99c1-44c9-8776-4a9632de398b",
      "a83236f8-1672-4fe2-a275-bdc20172a973"
    ],
    [
      "7a9e0de0-9b74-42ec-9e5c-db6a411958b1",
      "1aba94c5-86ee-4285-91b9-30d2a896c6fd"
    ],
    [
      "dd3e35b0-337b-4218-a17b-d22d001151bc",
      "2291b24e-092b-4b17-a039-bafc20c35ff9"
    ],
    [
      "b8855666-0218-47e6-be76-a022ba3bc1d2",
      "390cb6c1-bfd9-4e24-a0ed-006eb8e91b50"
    ],
    [
      "e5e379b8-d8c8-447c-9f14-747d35e81697",
      "5aa1061d-bda1-478e-ad30-125242d87db9"
    ],
    [
      "79fbc674-8f2b-4a98-9c96-c2434889c28c",
      "61925410-6259-439c-b7cf-711302d07bb5"
    ],
    [
      "409e1180-5ed1-4a20-98d7-4e2e082e6ead",
      "b0d2d8d2-07da-40d8-b7af-700bfcfbe928"
    ],
    [
      "409e1180-5ed1-4a20-98d7-4e2e082e6ead",
      "f0d007d6-6c2f-4c02-beb4-da3434d83696"
    ]
  ]
}
